# 6.4 req, res 객체 살펴보기

- http 모듈의 req, res 객체의 확장 버전

- 기존 http 모듈의 메서드 사용 + 익스프레스가 추가한 메서드나 속성 사용 


##### req 객체

```jsx
req.app // req.app.get('port')   app객체에 접근
req.body // body-parser 미들웨어가 만드는 요청의 본문 해석
req.cookies // cookie-parser 미들웨어가 만드는 요청의 쿠키 해석
req.ip // 요청의 ip 주소
req.params // 라우트 매개변수에 대한 정보
req.query // query스트링에 대한 정보 
req.signedCookies // 서명된 쿠키들
req.get(헤더 이름) // 헤더의 값
```

##### res 객체

```jsx
res.app // res.app.get('port')   app객체에 접근
res.cookie(키, 값, 옵션) // 쿠키 설정
res.clearCookie(키, 값, 옵션) // 쿠키 제거
res.end() // 데이터 없이 응답 보내기
res.json(JSON) // JSON 형태의 응답 보내기
res.redirect(주소) // 리다이렉트할 주소와 함께 응답 보내기
res.render(뷰, 데이터) // 템플릿 엔진을 렌더링해서 응답할 때 사용
res.send(데이터) // 데이터와 함께 응답 보내기
res.sendFile(경로) // 경로에 위치한 파일 응답
res.set(헤더, 값) // 응답의 헤더 설정
res.status(코드) // 응답 시의 HTTP 상태 코드 지정


/// 메서드 체이닝

res.status(201)
    .cookie('test', test)
    .redirect('/admin');
```


# 6.5 템플릿 엔진 사용하기

> javascript를 사용해서 HTML을 렌더링할 수 있도록 한다.

## 6.5.1 퍼그(제이드)

```jsx
app.set('port', process.env.PORT || 3000);
app.set('views', path.join(__dirname, 'views')); // 템플릿 파일들이 위치한 폴더 지정
// res.render 메서드가 이 폴더를 기준으로 템플릿 엔진을 찾아서 렌더링 
// 무조건 views 폴더 하위로 생각한다
app.set('view engine', 'pug'); // 사용할 템플릿 엔진 종류
```

### 6.5.1.1 HTML 표현

- <> 없음

- 태그 없음

- 탭 또는 스페이스로만 태그의 부모자식관계 규명

- 자식 태그는 부모 태그보다 들여쓰기

- 태그 속성은 소괄호로 묶어서 작성

```html
<!doctype html>
<html>
    <head>
        <title>익스프레스</title>
        <link rel="stylesheet" href ="./style.css"/>
    </head>
</html>
```

```pug
doctype html
html
  head
    title= title
    link(rel='stylesheet', href='/style.css')
  body
    block content
```

- div 태그인 경우 div 문자 생략 가능

- id는 #으로 속성 표시

- class는 .으로 속성 표시

- HTML 텍스트는 한 칸 띄고 입력

```html
<div id="login-button"></div>
<div class="post-image"></div>
<span id="highlight"></div>
<p id="hidden full">hello</div>
```

```pug
#login-button
.post-image
span#highlight
p.hidden.full hello
```

### 6.5.1.2 변수

```jsx
// GET / 라우터
router.get('/', (req, res) => {
   // 1 
  //res.render('index', { title: 'Express' }); // index.pug 를 HTML로 렌더링하면서 Express라는 객체를 변수로 집어넣기
  // layout.pug와 index.pug의 title부분이 모두 Express로 치환

    //2
     res.locals.title ='csy';
     res.render('index');
});
```